<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Juan Aguirre &amp; Tawny Torres">

<title>Ejercicios del Parcial Final (Analisis Bivariado en: Diferencia de Medias, Diferencia de Proporciones y Razon de Varianza, Prueba ANOVA)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PARCIAL FINAL_files/libs/clipboard/clipboard.min.js"></script>
<script src="PARCIAL FINAL_files/libs/quarto-html/quarto.js"></script>
<script src="PARCIAL FINAL_files/libs/quarto-html/popper.min.js"></script>
<script src="PARCIAL FINAL_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PARCIAL FINAL_files/libs/quarto-html/anchor.min.js"></script>
<link href="PARCIAL FINAL_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PARCIAL FINAL_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PARCIAL FINAL_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PARCIAL FINAL_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PARCIAL FINAL_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ejercicios del Parcial Final (Analisis Bivariado en: Diferencia de Medias, Diferencia de Proporciones y Razon de Varianza, Prueba ANOVA)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Juan Aguirre &amp; Tawny Torres </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>------------------------------------------------------------------------------------------------------------------</p>
<section id="diferencia-de-medias-comparacion-de-rendimiento-de-dos-algoritmos-de-aprendizaje-automatizado" class="level1">
<h1>DIFERENCIA DE MEDIAS: Comparacion de rendimiento de dos algoritmos de aprendizaje automatizado</h1>
<p>Un cientifico de datos esta trabajando en la mejora del rendimiento de un modelo de aprendizaje automatico para clasificacion. Quiere determinar si hay una diferencia significativa en la precision entre dos algoritmos diferentes. Para ello, recopila los resultados de ambas implementaciones en 100 conjuntos de datos diferentes y calcula la precision para cada uno.</p>
<p>Datos:</p>
<ul>
<li><p>Algoritmo A: Precision media = 0.78, Desviacion estandar = 0.06</p></li>
<li><p>Algoritmo B: Precision media = 0.82, Desviacion estandar = 0.05</p></li>
<li><p>Tamaño de la muestra para ambos algoritmos = 100</p></li>
</ul>
<p>Realiza un intervalo de confianza del 95% para la diferencia de medias y una prueba de hipotesis para determinar si hay evidencia suficiente para afirmar que hay una diferencia significativa en la precision a un nivel de significacia del 5%</p>
<p>Comprobar por las tres alternativas:</p>
<ol type="1">
<li>Regla de Decisiones</li>
<li>Metodo Grafico</li>
<li>P-Valor.</li>
</ol>
<p>-------------------------------------------------------------------------------------------------------------------</p>
<section id="regla-de-decisiones" class="level2">
<h2 class="anchored" data-anchor-id="regla-de-decisiones">Regla de decisiones</h2>
<p>Primero que todo, estableceremos las hipotesis:</p>
<ul>
<li><p><span class="math inline">\(H_0\)</span> (Hipotesis Nula) = <span class="math inline">\(\mu_1 - \mu_2 = 0\)</span> (No existe una diferencia significativa en las medias)</p></li>
<li><p><span class="math inline">\(H_1\)</span> (Hipotesis Alternativa) = <span class="math inline">\(\mu_1 - \mu_2 \neq 0\)</span> (Existe una diferencia significativa en las medias)</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#muestra algoritmo A</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>n1<span class="ot">&lt;-</span><span class="dv">100</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#media de algoritmo A</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>x1<span class="ot">&lt;-</span><span class="fl">0.78</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#desviacion estandar de Algoritmo A</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>s1<span class="ot">&lt;-</span><span class="fl">0.06</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">########################################</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#muestra algoritmo B</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>n2<span class="ot">&lt;-</span><span class="dv">100</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#media de algoritmo B</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>x2<span class="ot">&lt;-</span><span class="fl">0.82</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#desviacion estandar de Algoritmo B</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>s2<span class="ot">&lt;-</span><span class="fl">0.05</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con esto en mente, podemos realizar nuestro intervalo de confianza y encontrar segun la regla de decisiones el resultado de nuestra hipotesis. En este caso, primero haremos la tabla de decisiones.</p>
<p>Como sabemos las medias, las desviaciones y la muestra es grande, optaremos por el primer caso:</p>
<p>Es una prueba de dos colas (bilateral), y se tiene la siguiente toma de decisiones:</p>
<p>Si <span class="math inline">\(Z \geq Z_\frac{\alpha}{2}\)</span> o si <span class="math inline">\(Z \leq -Z_\frac{\alpha}{2}\)</span>, se rechaza H_0, de lo contrario se aceptara H_0.</p>
<p>Con los datos anteriores, podemos hallar a Z:</p>
<p><span class="math display">\[Z=\frac{(\hat{x_1}-\hat{x_2})-d_0}{\sqrt{\frac{\sigma^2_1}{n_1}+\frac{\sigma^2_2}{n_2}}}\]</span> Donde, reemplazando con los datos anteriormente anotados:</p>
<p><span class="math display">\[Z=\frac{(0.78 - 0.82)-0}{\sqrt{\frac{0.06^2}{100}+\frac{0.05^2}{100}}}\]</span></p>
<p><span class="math display">\[Z=\frac{-0.04}{\sqrt{0.000036+0.000025}}\]</span> <span class="math display">\[Z=\frac{-0.04}{\sqrt{0.000061}} = \frac{-0.04}{0.00781} = -5.121\]</span></p>
<p>Como usaremos un nivel del 5%, sabemos que:</p>
<p><span class="math display">\[Z_\frac{\alpha}{2} = Z_{0.025} = 1.96\]</span></p>
<p>Con esta informacion, podemos decir que:</p>
<p><span class="math display">\[Z = -5.121, Z_\frac{\alpha}{2} = 1.96\]</span></p>
<p><span class="math display">\[ Z &lt; - Z_\frac{\alpha}{2}\]</span></p>
<p>Con esto en mente, de vista inicial se puede decir que no se acepta la H_0.</p>
<p>A continuacion, se hara un intervalo de confianza para observar la diferencia de media entre los dos algoritmos. Este tiene la siguiente formula:</p>
<p><span class="math display">\[[(x_1-x_2)-Z_{\frac{\alpha}{2}}\sqrt{\frac{s^2_1}{n_1}+\frac{s^2_2}{n_2}} &lt; \mu_1 - \mu_2  &lt; (x_1-x_2)+Z_{\frac{\alpha}{2}}\sqrt{\frac{s^2_1}{n_1}+\frac{s^2_2}{n_2}}]\]</span></p>
<p>Ahora, reemplazando con los valores existentes:</p>
<p><span class="math display">\[[(0.78-0.82)-1.96\cdot\sqrt{\frac{0.06^2}{100}+\frac{0.05^2}{100}} &lt; \mu_1 - \mu_2  &lt; (0.78-0.82)+1.96\cdot\sqrt{\frac{0.06^2}{100}+\frac{0.05^2}{100}}]\]</span> <span class="math display">\[[(-0.04)-1.96\cdot\sqrt{0.000061} &lt; \mu_1 - \mu_2  &lt; (-0.04)+1.96\cdot\sqrt{0.000061}]\]</span> <span class="math display">\[[(-0.04)-1.96\cdot\ 0.00781 &lt; \mu_1 - \mu_2  &lt; (-0.04)+1.96\cdot 0.00781]\]</span> <span class="math display">\[[-0.0553 &lt; \mu_1 - \mu_2  &lt;-0.0246]\]</span></p>
<p>Debido a que el cero no esta en el intervalo de confianza, se puede decir que no se acepta la H_0</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="metodo-grafico" class="level2">
<h2 class="anchored" data-anchor-id="metodo-grafico">Metodo Grafico</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>x_valores <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="at">length=</span><span class="dv">1000</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x_valores, <span class="fu">dnorm</span>(x_valores), <span class="at">type=</span><span class="st">"l"</span>, <span class="at">ylab=</span><span class="st">"Densidad"</span>, <span class="at">xlab=</span><span class="st">"Valores Z"</span>, <span class="at">main=</span><span class="st">"Distribución Normal"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>valor_Z_0 <span class="ot">=</span> <span class="sc">-</span><span class="dv">3</span>        </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_Z_0, <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>valor_critico_inf <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.96</span>  </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_critico_inf, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>valor_critico_sup <span class="ot">=</span> <span class="fl">1.96</span>  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_critico_sup, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend=</span><span class="fu">c</span>(<span class="st">"Z_alpha/2"</span>, <span class="st">"Z_0"</span>), </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PARCIAL-FINAL_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>(En este ejemplo, como una grafica de distribucion normal va en el intervalo -3 a 3, se coloco a <span class="math inline">\(Z = -5.21\)</span> en el valor menor posible, en este caso, -3.)</p>
<p>Como se observa en la grafica, <span class="math inline">\(Z_0 = -5.21\)</span> no cae en la region acotada por <span class="math inline">\(Z_{\frac{\alpha}{2}} = 1.96\)</span>. En este caso, se rechaza la <span class="math inline">\(H_0\)</span></p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="p-valor" class="level2">
<h2 class="anchored" data-anchor-id="p-valor">P-Valor</h2>
<p>Para el p-valor, tenemos que:</p>
<p>si <span class="math inline">\(P-valor\le\alpha\)</span>, se rechaza <span class="math inline">\(H_0\)</span></p>
<p>Con esto en mente, se tiene lo siguiente:</p>
<p><span class="math display">\[P = 2[|1-\phi(Z_0)|]\]</span> <span class="math display">\[P = 2[|1-\phi(-5.21)|]\]</span> NOTA: Debido a que en las tablas de distribucion normal esta habilitada para valores entre -3 y 3, y tambien por el valor absoluto, se le asignara el valor de 1 a <span class="math inline">\(\phi(Z_0)\)</span>.</p>
<p><span class="math display">\[P = 2[1-1]\]</span> <span class="math display">\[P = [2-2]\]</span> <span class="math display">\[P = 0\]</span></p>
<p>Entonces, como <span class="math inline">\(0 &lt; 0.05\)</span>, es decir, <span class="math inline">\(P-Valor &lt; \alpha\)</span>, se puede rechazar <span class="math inline">\(H_0\)</span>.</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Como conclusion, hay evidencias y hay suficientes pruebas estadisticas para argumentar que se rechaza la hipotesis que no hay diferencias significativas en las medias de los algoritmos probados.</p>
<p>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
</section>
</section>
<section id="diferencia-de-proporciones-evaluacion-de-la-efectividad-de-dos-tratamientos-medicos" class="level1">
<h1>DIFERENCIA DE PROPORCIONES: Evaluacion de la efectividad de dos tratamientos medicos</h1>
<p>Un cientifico de datos participa en un estudio clinico que compara la efectividad de dos tratamientos medicos para una enfermedad especifica. Quiere determinar si hay una diferencia significativa en las tasas de exito entre los dos tratamientos. Los datos provienen de dos grupos independientes de pacientes.</p>
<p>Datos:</p>
<ul>
<li><p>Tratamiento A: Exito en el 75% de los casos, tamaño de muestra = 100.</p></li>
<li><p>Tratamiento B: Exito en el 85% de los casos, tamaño de muestra = 120.</p></li>
</ul>
<p>Realiza un intervalo de confianza para la diferencia de proporciones a un 95% y una prueba de hipotesis para evaluar si hay evidencia suficiente para afirmar que el Tratamiento A es mas efectivo que el Tratamiento B. A un nivel de significancia del 5%.</p>
<p>Comprobar por las tres alternativas:</p>
<ol type="1">
<li>Regla de Decisiones</li>
<li>Metodo Grafico</li>
<li>P-Valor.</li>
</ol>
<p>-------------------------------------------------------------------------------------------------------------------</p>
<section id="regla-de-decisiones-1" class="level2">
<h2 class="anchored" data-anchor-id="regla-de-decisiones-1">Regla de decisiones</h2>
<p>Primero que todo, estableceremos las hipotesis:</p>
<ul>
<li><p><span class="math inline">\(H_0\)</span> (Hipotesis Nula) = <span class="math inline">\(P_1 - P_2 \leq 0\)</span> (No existe una diferencia significativa o el tratamiento A es mas efectivo que el tratamiento B.)</p></li>
<li><p><span class="math inline">\(H_1\)</span> (Hipotesis Alternativa) = <span class="math inline">\(P_1 - P_2 &gt; 0\)</span> (El tratamiento A es mejor que el tratamiento B.)</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#proporcion del tratamiento A</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span><span class="fl">0.75</span>  </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#tamaño de muestra de tratamiento A</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>n1 <span class="ot">&lt;-</span><span class="dv">100</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="do">########################################  </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#proporcion del tratamiento B</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span><span class="fl">0.85</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#tamaño de muestra de tratamiento B</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>n1 <span class="ot">&lt;-</span><span class="dv">120</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#nivel de significancia</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con esto en mente, podemos realizar nuestro intervalo de confianza y encontrar segun la regla de decisiones el resultado de nuestra hipotesis. En este caso, primero haremos la tabla de decisiones.</p>
<p>Como sabemos las medias, las desviaciones y la muestra es grande, optaremos por el primer caso:</p>
<p>Es una prueba de dos colas (bilateral), y se tiene la siguiente toma de decisiones:</p>
<p>Si <span class="math inline">\(Z \geq Z_{\alpha}\)</span> , se rechaza H_0 de lo contrario se aceptara H_0.</p>
<p>Con esto en mente, podemos hallar la probabilidad del p combinado</p>
<p><span class="math display">\[\hat{p}_{\text{combinado}} = \frac{(n_1)(p_1)+(n_2)(p_2)}{(n_1)+(n_2)}\]</span> En este caso, seria de la siguiente manera:</p>
<p><span class="math display">\[\hat{p}_{\text{combinado}} = \frac{(100)(0.75)+(120)(0.85)}{100+120} = \frac{177}{220} = 0.8045\]</span></p>
<p>Con el p combinado encontrado, pasaremos a hallar el estadistico de prueba.</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
<p>La formula para hallar el estadistico de prueba en una prueba de diferencia de proporciones con dos muestras es la siguiente:</p>
<p><span class="math display">\[Z = \frac{\hat{p}_1 - \hat{p}_2}{\sqrt{\frac{\hat{p}_0\cdot(1-{\hat{p}_0})}{n_1}+\frac{\hat{p}_0\cdot(1-{\hat{p}_0})}{n_2}}}\]</span></p>
<p>Reemplazando los valores, tendriamos de la siguiente manera:</p>
<p><span class="math display">\[Z = \frac{0.75 - 0.85}{\sqrt{\frac{0.804\cdot(1-0.804)}{100}+\frac{0.804\cdot(1-0.804)}{120}}} = \frac{-0.10}{0.0537} = -1.862\]</span></p>
<p>Para una prueba al nivel de 5%, se tiene que <span class="math inline">\(\alpha=0.05\)</span></p>
<p>Entonces, para una prueba bilateral, se tiene la siguiente toma de decisiones:</p>
<p>Si <span class="math inline">\(Z \geq Z_{\alpha}\)</span> , entonces se rechazara <span class="math inline">\(H_0\)</span>, de lo contrario, se acepta <span class="math inline">\(H_0\)</span></p>
<p>En este caso:</p>
<p><span class="math display">\[Z_{\alpha} = 1.64\]</span></p>
<p>Como en este caso, <span class="math inline">\(-1.862 &lt; 1.64\)</span>, no se puede rechazar la <span class="math inline">\(H_0\)</span>, entonces la aceptamos.</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="metodo-grafico-1" class="level2">
<h2 class="anchored" data-anchor-id="metodo-grafico-1">Metodo Grafico</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>x_valores <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="at">length=</span><span class="dv">1000</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x_valores, <span class="fu">dnorm</span>(x_valores), <span class="at">type=</span><span class="st">"l"</span>, <span class="at">ylab=</span><span class="st">"Densidad"</span>, <span class="at">xlab=</span><span class="st">"Valores Z"</span>, <span class="at">main=</span><span class="st">"Distribución Normal"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>valor_Z_0 <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.862</span>        </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_Z_0, <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>valor_critico_inf <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.96</span>  </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_critico_inf, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>valor_critico_sup <span class="ot">=</span> <span class="dv">3</span>  </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_critico_sup, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend=</span><span class="fu">c</span>(<span class="st">"Z_alpha/2"</span>, <span class="st">"Z_0"</span>), </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PARCIAL-FINAL_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Como se observa en la grafica, <span class="math inline">\(Z_0 = -1.862\)</span> cae en la region acotada por <span class="math inline">\(Z_{\alpha} = 1.64\)</span>. En este caso, no se rechaza la <span class="math inline">\(H_0\)</span></p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="p-valor-1" class="level2">
<h2 class="anchored" data-anchor-id="p-valor-1">P-Valor</h2>
<p>Para el p-valor, tenemos que:</p>
<p>si <span class="math inline">\(P-valor\le\alpha\)</span>, se rechaza <span class="math inline">\(H_0\)</span></p>
<p>Con esto en mente, se tiene lo siguiente:</p>
<p><span class="math display">\[P = [|1-\phi(Z_0)|]\]</span> <span class="math display">\[P = [|1-\phi(-1.86)|]\]</span></p>
<p><span class="math display">\[P = [1-0.0314]\]</span> <span class="math display">\[P = 0.9686\]</span></p>
<p>Entonces, como <span class="math inline">\(0.9686 &gt; 0.05\)</span>, es decir, <span class="math inline">\(P-Valor &gt; \alpha\)</span>, no se puede rechazar <span class="math inline">\(H_0\)</span>.</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="conclusion-1" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-1">Conclusion</h2>
<p>Como conclusion, hay evidencias y hay suficientes pruebas estadisticas para argumentar que no existe una diferencia significativa en la proporcion de los tratamientos A y tratamientos B.</p>
<p>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
</section>
</section>
<section id="razon-de-varianzas-evaluacion-de-la-consistencia-de-dos-instrumentos-de-medicion" class="level1">
<h1>RAZON DE VARIANZAS: Evaluacion de la consistencia de dos instrumentos de medicion</h1>
<p>Un cientifico de datos participa en un estudio de evaluacion de instrumentos de medicion. Quiere determinar si hay una diferencia significativa en la consistencia de dos instrumentos que miden la misma variable. Recopila datos de mediciones repetidas en una muestra de 30 observaciones con cada instrumento.</p>
<p>Datos:</p>
<ul>
<li><p>Instrumento A: Varianza muestral = 36</p></li>
<li><p>Instrumento B: Varianza muestral = 25</p></li>
</ul>
<p>Realiza un intervalo de confianza para la razon de varianzas y una prueba de hipotesis para evaluar si hay evidencia suficiente para afirmar que la consistencia de las mediciones difiere entre los dos instrumentos.</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
<section id="regla-de-decisiones-2" class="level2">
<h2 class="anchored" data-anchor-id="regla-de-decisiones-2">Regla de decisiones</h2>
<p>Primero que todo, estableceremos las hipotesis</p>
<ul>
<li><p><span class="math inline">\(H_0\)</span> (Hipotesis Nula) = <span class="math inline">\(\sigma^2 = \sigma_0^2\)</span> (Las varianzas de los instrumentos son iguales)</p></li>
<li><p><span class="math inline">\(H_1\)</span> (Hipotesis Alternativa) = <span class="math inline">\(\sigma^2 \neq \sigma_0^2\)</span> (Las varianzas de los instrumentos no son iguales)</p></li>
</ul>
<p>Con esto en mente, hallamos la proporcion para las dos muestras:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#muestra instrumento A</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>n1<span class="ot">&lt;-</span><span class="dv">30</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#varianza muestral del instrumento A</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>s1<span class="ot">&lt;-</span><span class="dv">36</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="do">########################################</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#muestra instrumento A</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>n2<span class="ot">&lt;-</span><span class="dv">30</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#varianza muestral del instrumento A</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>s2<span class="ot">&lt;-</span><span class="dv">25</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con esto, podemos calcular el estadistico de prueba usando la siguiente formula:</p>
<p><span class="math display">\[
F=\frac{s^2_1}{s^2_2}
\]</span></p>
<p>Donde reemplazando es:</p>
<p><span class="math display">\[
F=\frac{36^2}{25^2} = 2.0736
\]</span></p>
<p>Para una prueba donde <span class="math inline">\(\alpha\)</span> = 0.05, entonces: <span class="math inline">\(v_1 = n_1-1\)</span> y <span class="math inline">\(v_2 = n_2 -1\)</span></p>
<p>$$ F_ = F_ = F_{0.025}(v1,v2) = F_{0.025}(29,29) = 1.86081143</p>
<p>$$ <span class="math inline">\(F = 2.0736, F_\frac{\alpha}{2}=1.86081143\)</span> Como <span class="math inline">\(F &gt; F_\frac{\alpha}{2}\)</span>, entonces no se aceptara la <span class="math inline">\(H_0\)</span>.</p>
<p>-------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="intervalo-de-confianza" class="level2">
<h2 class="anchored" data-anchor-id="intervalo-de-confianza">Intervalo de confianza</h2>
<p>Para un intervalo de confianza, se tiene la formula de la siguiente manera;</p>
<p><span class="math display">\[[\frac{s^2_1}{s^2_2}\frac{1}{F_\frac{\alpha}{2}} &lt; \frac{\sigma^2_1}{\sigma^2_2}  &lt; \frac{s^2_1}{s^2_2}\cdot{F_\frac{\alpha}{2}}]\]</span></p>
<p>Al reemplazar los valores, tenemos lo siguiente:</p>
<p><span class="math display">\[[\frac{36^2}{25^2}\cdot\frac{1}{1.860} &lt; \frac{\sigma^2_1}{\sigma^2_2}  &lt; \frac{36^2}{25^2}\cdot{1.860}]\]</span></p>
<p><span class="math display">\[[2.073\cdot\frac{1}{1.860} &lt; \frac{\sigma^2_1}{\sigma^2_2}  &lt; 2.073\cdot{1.860}]\]</span></p>
<p><span class="math display">\[[2.073\cdot\frac{1}{1.860} &lt; \frac{\sigma^2_1}{\sigma^2_2}  &lt; 2.073\cdot{1.860}]\]</span></p>
<p><span class="math display">\[[1.1145 &lt; \frac{\sigma^2_1}{\sigma^2_2}  &lt; 3.855]\]</span></p>
<p>------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="conclusion-2" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-2">Conclusion</h2>
<p>Como conclusion,hay evidencias y hay suficientes pruebas estadisticas para argumentar que las la varianza de los instrumentos son diferentes.</p>
<p>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
</section>
</section>
<section id="prueba-anova" class="level1">
<h1>PRUEBA ANOVA</h1>
<p>Para este ejemplo, se utilizara la prueba de normalidad Kolmogorov-Smirnov, y junto a este datos generados por el mismo programa:</p>
<p>Se usara los datos del conjunto de datos “iris”, integrado en R.</p>
<p>Con esto en mente, se plantean dos hipotesis con estos datos:</p>
<p>H_0: No existe una diferencia entre las distribuciones de la media en el tamaño de las hojas de las plantas “Versicolor” y “Setosa”</p>
<p>H_1: existe una diferencia entre las distribuciones de la media en el tamaño de las hojas de las plantas “Versicolor” y “Setosa”</p>
<p>Antes de empezar con la prueba, se mostraran los datos y graficos relevantes con relacion a la longitud de los petalos por especie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>modelo_anova <span class="ot">&lt;-</span> <span class="fu">aov</span>(Sepal.Length <span class="sc">~</span> Species, <span class="at">data =</span> iris)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(modelo_anova)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value Pr(&gt;F)    
Species       2  63.21  31.606   119.3 &lt;2e-16 ***
Residuals   147  38.96   0.265                   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(Sepal.Length <span class="sc">~</span> Species, <span class="at">data =</span> iris, <span class="at">main =</span> <span class="st">"Longitud de Sépalos por Especie"</span>, <span class="at">ylab =</span> <span class="st">"Longitud de Sépalos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PARCIAL-FINAL_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Sepal.Length <span class="sc">~</span> Sepal.Width, <span class="at">data =</span> iris, <span class="at">col =</span> <span class="fu">as.numeric</span>(iris<span class="sc">$</span>Species),</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Longitud de Sépalos vs. Ancho de Sépalos por Especie"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Ancho de Sépalos"</span>, <span class="at">ylab =</span> <span class="st">"Longitud de Sépalos"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">levels</span>(iris<span class="sc">$</span>Species), <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">pch =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PARCIAL-FINAL_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se escogen el tamaño de los petalos de las dos especies (setosa y versicolor)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>setosa_petal_length <span class="ot">&lt;-</span> iris<span class="sc">$</span>Petal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">"setosa"</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>versicolor_petal_length <span class="ot">&lt;-</span> iris<span class="sc">$</span>Petal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">"versicolor"</span>]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Prueba de Kolmogorov-Smirnov</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>ks_test_result <span class="ot">&lt;-</span> <span class="fu">ks.test</span>(setosa_petal_length, versicolor_petal_length)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ks_test_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Exact two-sample Kolmogorov-Smirnov test

data:  setosa_petal_length and versicolor_petal_length
D = 1, p-value &lt; 2.2e-16
alternative hypothesis: two-sided</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (ks_test_result<span class="sc">$</span>p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Se rechaza la hipótesis nula. Hay evidencia de que las distribuciones son diferentes.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No se puede rechazar la hipótesis nula. No hay suficiente evidencia para afirmar que las distribuciones son diferentes</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Se rechaza la hipótesis nula. Hay evidencia de que las distribuciones son diferentes.</code></pre>
</div>
</div>
<p>Con esto, tenemos suficiente evidencia estadistica para rechazar la hipotesis nula y aceptamos la alternativa que nos indica que hay una diferencia en la distribucion de la longitud de los petalos de las dos especies “Versicolor” y “Setosa”.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>