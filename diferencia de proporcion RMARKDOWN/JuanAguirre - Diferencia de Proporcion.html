<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Diferencia de Proporciones - Ejercicio practico</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="JuanAguirre - Diferencia de Proporcion_files/libs/clipboard/clipboard.min.js"></script>
<script src="JuanAguirre - Diferencia de Proporcion_files/libs/quarto-html/quarto.js"></script>
<script src="JuanAguirre - Diferencia de Proporcion_files/libs/quarto-html/popper.min.js"></script>
<script src="JuanAguirre - Diferencia de Proporcion_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="JuanAguirre - Diferencia de Proporcion_files/libs/quarto-html/anchor.min.js"></script>
<link href="JuanAguirre - Diferencia de Proporcion_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="JuanAguirre - Diferencia de Proporcion_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="JuanAguirre - Diferencia de Proporcion_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="JuanAguirre - Diferencia de Proporcion_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="JuanAguirre - Diferencia de Proporcion_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Diferencia de Proporciones - Ejercicio practico</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="problema-de-aplicación-pruebas-de-hipótesis" class="level2">
<h2 class="anchored" data-anchor-id="problema-de-aplicación-pruebas-de-hipótesis">PROBLEMA DE APLICACIÓN PRUEBAS DE HIPÓTESIS</h2>
<p>De una muestra aleatoria de 203 anuncios publicados en revistas colombianas, 52 eran de deportes. De una muestra aleatoria independiente de 270 anuncios publicados en revistas brasileras, 56 eran de deportes. Usando un nivel del 5%, contrastar frente a una alternativa bilateral, la hipótesis nula de que las proporciones de anuncios cómicos de las revistas colombianas y americanas son iguales. Contrastar las hipótesis por las 3 alternativas:</p>
<ul>
<li><p>Regla de decisiones</p></li>
<li><p>Método grafico</p></li>
<li><p>P-valor</p></li>
<li><p>Prueba prop.test en R.</p></li>
</ul>
<p>--------------------------------------------------------------------------------------------------------------------</p>
</section>
<section id="regla-de-decisiones" class="level2">
<h2 class="anchored" data-anchor-id="regla-de-decisiones">Regla de decisiones</h2>
<p>Primero que todo, estableceremos las hipotesis</p>
<ul>
<li><p><span class="math inline">\(H_0\)</span> (Hipotesis Nula) = <span class="math inline">\(P1 - P2 \neq 0\)</span> (Las proporciones no son iguales)</p></li>
<li><p><span class="math inline">\(H_1\)</span> (Hipotesis Alternativa) = <span class="math inline">\(P1 - P2 = 0\)</span> (Las proporciones son iguales)</p></li>
</ul>
<p>Con esto en mente, hallamos la proporcion para las dos muestras:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#La primera muestra de anuncios de revistas colombianas, de 203, 52 eran de deportes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> (<span class="dv">52</span><span class="sc">/</span><span class="dv">203</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>p1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2561576</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#La primera muestra de anuncios de revistas brasilera, de 270, 56 eran de deportes</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> (<span class="dv">56</span><span class="sc">/</span><span class="dv">270</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2074074</code></pre>
</div>
</div>
</section>
<section id="p-combinado" class="level1">
<h1>P-Combinado</h1>
<p>Con esto en mente, podemos hallar la probabilidad del p combinado</p>
<p><span class="math display">\[\hat{p}_{\text{combinado}} = \frac{(n_1)(p_1)+(n_2)(p_2)}{(n_1)+(n_2)}\]</span> En este caso, seria de la siguiente manera:</p>
<p><span class="math display">\[\hat{p}_{\text{combinado}} = \frac{(203)(0.256)+(270)(0.207)}{203+270} = \frac{107.858}{473} = 0.228\]</span></p>
<p>Con el p combinado encontrado, pasaremos a hallar el estadistico de prueba.</p>
</section>
<section id="estadistico-de-prueba" class="level1">
<h1>Estadistico de Prueba</h1>
<p>La formula para hallar el estadistico de prueba en una prueba de diferencia de proporciones con dos muestras es la siguiente:</p>
<p><span class="math display">\[Z = \frac{\hat{p}_1 - \hat{p}_2}{\sqrt{\frac{\hat{p}_0\cdot(1-{\hat{p}_0})}{n_1}+\frac{\hat{p}_0\cdot(1-{\hat{p}_0})}{n_2}}}\]</span></p>
<p>Reemplazando los valores, tendriamos de la siguiente manera:</p>
<p><span class="math display">\[Z = \frac{0.256 - 0.207}{\sqrt{\frac{0.228\cdot(1-0.228)}{203}+\frac{0.228\cdot(1-0.228)}{270}}} = \frac{0.049}{0.038} = 1.289\]</span></p>
<p>Para una prueba al nivel de 5%, se tiene que <span class="math inline">\(\alpha=0.05\)</span></p>
<p>Entonces, para una prueba bilateral, se tiene la siguiente toma de decisiones:</p>
<p>Si <span class="math inline">\(Z \ge Z_{\frac{\alpha}{2}}\)</span> o <span class="math inline">\(Z \le -Z_{\frac{\alpha}{2}}\)</span> , entonces se rechazara <span class="math inline">\(H_0\)</span>, de lo contrario, se acepta <span class="math inline">\(H_0\)</span></p>
<p>En este caso:</p>
<p><span class="math display">\[Z_{\frac{\alpha}{2}} = 1.96\]</span></p>
<p>Como en este caso, <span class="math inline">\(1.96 &gt; 1.289\)</span>, se aceptara la <span class="math inline">\(H_0\)</span>.</p>
<section id="metodo-grafico" class="level2">
<h2 class="anchored" data-anchor-id="metodo-grafico">Metodo Grafico</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x_valores <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="at">length=</span><span class="dv">1000</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x_valores, <span class="fu">dnorm</span>(x_valores), <span class="at">type=</span><span class="st">"l"</span>, <span class="at">ylab=</span><span class="st">"Densidad"</span>, <span class="at">xlab=</span><span class="st">"Valores Z"</span>, <span class="at">main=</span><span class="st">"Distribución Normal"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>valor_Z_0 <span class="ot">=</span> <span class="fl">1.289</span>          </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_Z_0, <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>valor_critico_inf <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.96</span>  </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_critico_inf, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>valor_critico_sup <span class="ot">=</span> <span class="fl">1.96</span>  </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> valor_critico_sup, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend=</span><span class="fu">c</span>(<span class="st">"Z_alpha/2"</span>, <span class="st">"Z_0"</span>), </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="JuanAguirre---Diferencia-de-Proporcion_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Como se observa en la grafica, <span class="math inline">\(Z_0\)</span> no cae en la region critica, acotada por <span class="math inline">\(Z_{\frac{\alpha}{2}} = 1.96\)</span>. En este caso, no se rechaza la <span class="math inline">\(H_0\)</span></p>
</section>
<section id="p-valor" class="level2">
<h2 class="anchored" data-anchor-id="p-valor">P-Valor</h2>
<p>Para el p-valor, tenemos que:</p>
<p>si <span class="math inline">\(P-valor\le\alpha\)</span>, se rechaza <span class="math inline">\(H_0\)</span></p>
<p>Con esto en mente, se tiene lo siguiente:</p>
<p><span class="math display">\[P = 2[1-\phi(Z_0)]\]</span> <span class="math display">\[P = 2[1-\phi(1.289)]\]</span> <span class="math display">\[P = [2-1.7994]\]</span> <span class="math display">\[P = 0.2006\]</span></p>
<p>Entonces, como <span class="math inline">\(0.2006 &gt; 0.05\)</span>, es decir, <span class="math inline">\(P-Valor &gt; \alpha\)</span>, no se puede rechazar a <span class="math inline">\(H_0\)</span>.</p>
</section>
<section id="prueba-prop.test-en-r" class="level2">
<h2 class="anchored" data-anchor-id="prueba-prop.test-en-r">Prueba prop.test en R</h2>
<p>Ahora, usando el comando integrado en R, podemos hallar la proporcion:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>N1 <span class="ot">&lt;-</span> <span class="dv">203</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>X1 <span class="ot">&lt;-</span> <span class="dv">52</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>N2 <span class="ot">&lt;-</span><span class="dv">270</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>X2 <span class="ot">&lt;-</span><span class="dv">56</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Z <span class="ot">&lt;-</span> <span class="fu">prop.test</span>(<span class="at">x=</span> <span class="fu">c</span>(X1,X2), <span class="at">n =</span> <span class="fu">c</span>(N1,N2), <span class="at">alternative =</span> <span class="st">"two.sided"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(Z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    2-sample test for equality of proportions with continuity correction

data:  c(X1, X2) out of c(N1, N2)
X-squared = 1.2986, df = 1, p-value = 0.2545
alternative hypothesis: two.sided
95 percent confidence interval:
 -0.03266567  0.13016613
sample estimates:
   prop 1    prop 2 
0.2561576 0.2074074 </code></pre>
</div>
</div>
<p>De esta prueba, podemos sacar varias conclusiones:</p>
<ul>
<li><p>El p-valor tiene un valor de 0.2112</p></li>
<li><p>Tomando en cuenta el nivel de significancia del 0.05, como el p-valor es mayor, no se rechaza la hipotesis nula (H0).</p></li>
</ul>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Como conclusion, no hay evidencias y hay suficientes pruebas estadisticas para argumentar que las proporciones de los anuncios en las revistas de deporte Colombianas y Brasileras son iguales.</p>
<p>The <code>echo: false</code> option disables the printing of code (only output is displayed).</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>